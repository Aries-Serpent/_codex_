[importlinter]
root_package = codex_ml

[importlinter:contract:layers]
name = Core layering (utils -> data -> models -> training -> api)
type = layers
layers =
    codex_ml.utils
    codex_ml.data
    codex_ml.models
    codex_ml.training
    codex_ml.api

[importlinter:contract:independence]
name = Independence: api <-> data registry (no back-refs)
type = independence
modules =
    codex_ml.api
    codex_ml.data

[importlinter:contract:forbidden]
name = API must not import training internals (stable surface only)
type = forbidden
source_modules =
    codex_ml.api
forbidden_modules =
    codex_ml.training.internal
    codex_ml.training._internal
    codex_ml.training.experimental
