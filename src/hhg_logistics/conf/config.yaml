# Root Hydra config
defaults:
  - env: ubuntu
  - data: default
  - model: baseline
  - training: default
  # Pipeline-stage defaults (override via CLI: pipeline/ingest=ingest_alt, etc.)
  - pipeline/ingest: ingest
  - pipeline/clean: clean
  - pipeline/features: features

env:
  name: ubuntu

# global seed (overridable via CLI: seed=42 or training.seed=42)
seed: 1337

data:
  path: ${oc.env:DATA_DIR, data/processed}
  raw_dir: data/raw
  processed_dir: data/processed
  models_dir: data/models

pipeline:
  ingest:
    input_path: ${data.raw_dir}/input.csv
  clean:
    output_path: ${data.processed_dir}/clean.csv
    drop_na: true
    required_columns: ["id", "value"]
    value_minmax: [0, 2]
  features:
    output_path: ${data.processed_dir}/features.csv
    even_flag: true
    passthrough: ["id", "value"]

model:
  type: "BaselineModel"

training:
  epochs: 1
  batch_size: 8
  lr: 0.001
  max_steps: null
  grad_accum: 1
  num_workers: 2
  seed: ${seed}

hydra:
  run:
    dir: ./.codex/outputs/${now:%Y-%m-%d}/${now:%H-%M-%S}
  job_logging:
    version: 1
    root:
      level: INFO
    disable_existing_loggers: false
